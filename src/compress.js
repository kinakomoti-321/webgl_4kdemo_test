var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(l){return l.raw=l};$jscomp.createTemplateTagFirstArgWithRaw=function(l,b){l.raw=b;return l};var canvas=document.createElement("canvas");canvas.style.position="fixed";canvas.style.cursor="none";canvas.style.left=canvas.style.top=0;canvas.width=window.innerWidth;canvas.height=window.innerHeight;document.body.appendChild(canvas);
var song={songData:[{i:[2,100,128,0,3,201,128,0,0,0,0,6,29,0,0,0,0,195,4,1,3,50,184,119,244,147,6,84,6],p:[1,1,1,1,1],c:[{n:[137,,,,144,,,,142,,,,156,,,,154,,,,,,,,137,,,,144,,,,142,,,,156,,,,154],f:[]}]},{i:[0,255,116,79,0,255,116,0,83,0,4,6,69,52,0,0,0,0,0,0,2,14,0,0,32,0,0,0,0],p:[,2,2,2,2],c:[{n:[],f:[]},{n:[147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147,,,,147],f:[]}]},{i:[0,160,128,64,0,160,128,0,64,210,4,7,52,85,0,0,0,60,4,1,2,255,0,0,32,61,5,32,6],p:[,,3],c:[{n:[],
f:[]},{n:[],f:[]},{n:[150,,,,,,,,150,,,,,,,,150,,,,,,,,150,,,,,,,,150,,,,,,,,150],f:[]}]}],rowLen:5513,patternLen:48,endPattern:4,numChannels:3};"use strict";
var CPlayer=function(){var l=function(a){return Math.sin(6.283184*a)},b=[l,function(a){return.5>a%1?1:-1},function(a){return a%1*2-1},function(a){a=a%1*4;return 2>a?a-1:3-a}],h,n,m,p,q;this.init=function(a){h=a;n=a.endPattern;m=0;p=a.rowLen*a.patternLen*(n+1)*2;q=new Int32Array(p)};this.generate=function(){var a,k,g,d,y,w=new Int32Array(p),e=h.songData[m],z=h.rowLen,D=h.patternLen,I=0,E=0,r;var t=!1;var F=[];for(k=0;k<=n;++k){var B=e.p[k];for(g=0;g<D;++g){if(y=B?e.c[B-1].f[g]:0)e.i[y-1]=e.c[B-1].f[g+
D]||0,17>y&&(F=[]);var V=b[e.i[16]],W=e.i[17]/512,X=Math.pow(2,e.i[18]-9)/z,Y=e.i[19],N=e.i[20],Z=135.82764118168*e.i[21]/44100,aa=1-e.i[22]/255,J=1E-5*e.i[23],ba=e.i[24]/32,ca=e.i[25]/512,da=6.283184*Math.pow(2,e.i[26]-9)/z,O=e.i[27]/255,K=e.i[28]*z&-2;y=(k*D+g)*z;for(d=0;4>d;++d)if(a=B?e.c[B-1].n[g+d*D]:0){if(!F[a]){var c=F;var x=a;var P=r=void 0,G,u,f=e,Q=a,ea=b[f.i[0]],fa=f.i[1],ha=f.i[3]/32,ia=b[f.i[4]],ja=f.i[5],ka=f.i[8]/32,R=f.i[9],A=f.i[10]*f.i[10]*4,H=f.i[11]*f.i[11]*4,L=f.i[12]*f.i[12]*
4,la=1/L,ma=-f.i[13]/16,C=f.i[14],na=z*Math.pow(2,2-f.i[15]),S=new Int32Array(A+H+L),T=0,U=0;for(G=u=0;u<A+H+L;u++,G++){0<=G&&(C=C>>8|(C&255)<<4,G-=na,P=.003959503758*Math.pow(2,(Q+(C&15)+f.i[2]-128-128)/12),r=.003959503758*Math.pow(2,(Q+(C&15)+f.i[6]-128-128)/12)*(1+8E-4*f.i[7]));var v=1;u<A?v=u/A:u>=A+H&&(v=(u-A-H)*la,v=(1-v)*Math.pow(3,ma*v));T+=P*Math.pow(v,ha);var M=ea(T)*fa;U+=r*Math.pow(v,ka);M+=ia(U)*ja;R&&(M+=(2*Math.random()-1)*R);S[u]=80*M*v|0}c[x]=S}x=F[a];a=0;for(c=2*y;a<x.length;a++,
c+=2)w[c]+=x[a]}for(a=0;a<z;a++)d=2*(y+a),(c=w[d])||t?(t=Z,Y&&(t*=V(X*d)*W+.5),t=1.5*Math.sin(t),I+=t*E,c=aa*(c-E)-I,E+=t*c,c=3==N?E:1==N?c:I,J&&(c*=J,c=1>c?-1<c?l(.25*c):-1:1,c/=J),c*=ba,t=1E-5<c*c,x=Math.sin(da*d)*ca+.5,r=c*(1-x),c*=x):r=0,d>=K&&(r+=w[d-K+1]*O,c+=w[d-K]*O),w[d]=r|0,w[d+1]=c|0,q[d]+=r|0,q[d+1]+=c|0}}m++;return m/h.numChannels};this.createAudioBuffer=function(a){a=a.createBuffer(2,p/2,44100);for(var k=0;2>k;k++)for(var g=a.getChannelData(k),d=k;d<p;d+=2)g[d>>1]=q[d]/65536;return a}};
document.addEventListener("click",function(){function l(){b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);b.uniform1f(b.getUniformLocation(n,"m"),.001*(Date.now()-q));b.drawArrays(b.TRIANGLE_STRIP,0,4);setTimeout(l,1E3/60)}var b=canvas.getContext("webgl2")||canvas.getContext("experimental-webgl2"),h=function(a,k,g){g=b.createShader(g);b.shaderSource(g,k.replace(/^\n/,""));b.compileShader(g);b.attachShader(a,g);b.deleteShader(g)};vs="\n#version 300 es\nvoid main()\n{\n    gl_Position = vec4(ivec2(gl_VertexID&1,gl_VertexID>>1)*2-1,0,1);\n}\n";
fs="\n#version 300 es\nprecision highp float;out vec4 f;uniform vec2 v;uniform float m;\n#define PI 3.141\nfloat y;float n(float y){return fract(sin(y*127.1)*43758.5453);}vec2 s(vec2 y){return fract(sin(vec2(dot(y,vec2(127.1,311.7)),dot(y,vec2(311.7,127.1))))*43758.5453);}vec2 n(vec2 v,float y){float f=cos(y),z=sin(y);return vec2(v.x*f-v.y*z,v.x*z+v.y*f);}float t(float y){float v=mod(y,1.);return sin(v*40.)*step(v,PI/40.);}float r(float y){return mix(n(floor(y)),n(floor(y+1.)),smoothstep(.4,.5,fract(y)));}struct GridResult{vec2 cell;float d;vec3 n;};GridResult r(vec3 y,vec3 v){GridResult f;f.cell=floor(y+v*.001).xz+.5;vec2 m=(-y.xz+f.cell)/v.xz,d=m+abs(.5/v).xz;f.d=min(d.x,d.y);return f;}float s(vec3 y,vec3 v){vec3 f=abs(y)-v;return length(max(f,0.))+min(0.,max(max(f.x,f.y),f.z));}float n(vec3 v,vec2 f,inout int m){vec3 d=v;d.xz-=f;vec3 z=vec3(0,r(y+fract(sin(dot(f,vec2(127.1,311.7)))*43758.5453)),0);float x=s(d-z,vec3(.5)),P=length(v-vec3(0,3,0))-1.-.1*t(y);vec3 c=abs(v)-vec3(0,3,0);float l=1e3;for(int i=0;i<4;i++)c*=1.4,c=abs(c-vec3(3)),c.xy=n(c.xy,r(y)),c.yz=n(c.yz,r(y)),l=min(s(c,vec3(1,2,1))/1.4,l);m=x<P?0:1;m=x<l?0:1;return min(x,l);}vec3 t(vec3 y,vec2 v){vec2 f=vec2(0,1e-4);int l=0;return normalize(vec3(n(y+f.yxx,v,l)-n(y-f.yxx,v,l),n(y+f.xyx,v,l)-n(y-f.xyx,v,l),n(y+f.xxy,v,l)-n(y-f.xxy,v,l)));}void main(){vec2 d=((gl_FragCoord.xy+s(gl_FragCoord.xy+vec2(m,m*2.)))*2.-v.xy)/v.y;y=m;vec3 l=vec3(0,4,20);l.xz=n(l.xz,cos(y)*PI);l.yz=n(l.yz,sin(y)*.15);vec3 c=normalize(vec3(0,4,0)-l),x=normalize(cross(c,vec3(0,1,0)));float z=2.5;z+=r(y)*2.-1.;vec3 i=normalize(x*d.x+normalize(cross(x,c))*d.y+c*z);float G=.01;vec3 a=l+i*G;float P=0.;GridResult h;float g;vec3 u=vec3(1),o=vec3(0);for(int C=0;C<100;C++){if(P<=G)h=r(a,i),P+=h.d;int I=0;g=n(a,h.cell,I);G=min(G+g,P);a=l+i*G;if(g<.01){vec3 A=vec3(0);if(I==0){vec3 B=mod(a,1.);A=vec3(B.x*B.z);A=vec3(0);}else A=vec3(1);vec3 B=t(a,h.cell);float D=dot(B,-i);l=a;i=reflect(i,B);G=0.;a=l+i*.01;P=0.;o+=A*u*D;u*=.8;}}vec3 C=vec3(0);C=o;C+=i.y*.1;f=vec4(C,1);}";
var n=b.createProgram();h(n,vs,b.VERTEX_SHADER);h(n,fs,b.FRAGMENT_SHADER);b.linkProgram(n);b.useProgram(n);b.uniform2f(b.getUniformLocation(n,"v"),canvas.width,canvas.height);h=new AudioContext;var m=new CPlayer;m.init(song);m.generate(0);m.generate(0);m=m.createAudioBuffer(h);var p=h.createBufferSource();p.buffer=m;p.loop=!0;p.connect(h.destination);p.start(0);var q=Date.now();l()});